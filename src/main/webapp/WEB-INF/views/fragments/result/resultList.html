<!DOCTYPE html>
<html>
<body>
	<div th:fragment="box (url, withProject)" id="results-box" class="nav-tabs-custom box box-primary results-box">
		<ul class="nav nav-tabs" style="display: none;">
			<li class="active"><a href="#results" th:text="#{page.results.title}">Results</a></li>
		</ul>
		<div class="tab-content box-body">
			<div class="tab-pane active" id="results">
				<div class="dataTables_wrapper form-inline dt-bootstrap">
					<div class="row">
						<div class="col-sm-12">
							<div dt:conf="resultsTable">
								<div dt:confType="callback" dt:type="init" dt:function="Tremapp.resultsTableInit" />
							</div>
							<table id="resultsTable" class="resultsTable" dt:table="true" dt:url="${url}" dt:displayLength="50" dt:filterable="false">
								<thead>
									<tr>
										<th th:if="${withProject}" dt:property="projectName" dt:searchable="false" dt:sortable="false" dt:renderFunction="Tremapp.resultsTableRenderProject" th:text="#{result.project}">Project</th>
										<th dt:property="name" dt:renderFunction="Tremapp.resultsTableRenderName" th:text="#{result.name}">Name</th>
										<th dt:property="status" dt:renderFunction="Tremapp.dataTables.impl.result.renderStatus" th:text="#{result.status}">Status</th>
										<th dt:property="severity" dt:renderFunction="Tremapp.dataTables.impl.result.renderSeverity" th:text="#{result.severity}">Severity</th>
										<th dt:property="startedAt" dt:sortInitDirection="desc" th:text="#{result.startedAt}">Started at</th>
										<th dt:property="length" dt:searchable="false" dt:sortable="false" th:text="#{result.length}">Length</th>
									</tr>
								</thead>
							</table>
							<script th:inline="javascript">
								Tremapp.resultsTableRenderName = function(name, type, result) {
									return '<a href="' + Tremapp.baseUrl + 'result/home/' + result.id + '" class="display-result" data-result-id="' + result.id + '" data-result-status="' + result.statusValue + '">' + (name == null ? result.id : name) + '</a>';
								};
								Tremapp.resultsTableRenderProject = function(project, type, result) {
									return Tremapp.dataTables.renderLink('project/home/' + result.projectId, project == null ? result.projectId : project);
								};
								Tremapp.resultsTableInit = function(settings, json) {
									Tremapp.dataTables.impl.result.init($('#results-box'), settings, json);
								};
							</script>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>